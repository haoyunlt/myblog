<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°èµ„æºæµ‹è¯•</title>
    <link rel="stylesheet" href="/css/katex.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-item {
            background: #f5f7fa;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #409eff;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success { background: #f0f9ff; color: #0c63e4; }
        .error { background: #fef0f0; color: #f56c6c; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ”§ æœ¬åœ°èµ„æºåŠ è½½æµ‹è¯•</h1>
    <p>éªŒè¯æ‰€æœ‰ç¬¬ä¸‰æ–¹èµ„æºæ˜¯å¦æˆåŠŸä»æœ¬åœ°åŠ è½½</p>
    
    <div class="test-item">
        <h2>ğŸ“Š Mermaid.js æµ‹è¯•</h2>
        <div id="mermaid-status" class="status">æ£€æµ‹ä¸­...</div>
        <div class="mermaid">
            graph TD
                A[CDNèµ„æº] --> B[æœ¬åœ°èµ„æº]
                B --> C[åŠ è½½æˆåŠŸ]
        </div>
    </div>
    
    <div class="test-item">
        <h2>ğŸ§® KaTeX æ•°å­¦å…¬å¼æµ‹è¯•</h2>
        <div id="katex-status" class="status">æ£€æµ‹ä¸­...</div>
        <p>è¡Œå†…å…¬å¼: $E = mc^2$</p>
        <p>å—çº§å…¬å¼:</p>
        $$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$
    </div>
    
    <div class="test-item">
        <h2>ğŸ“‹ èµ„æºåŠ è½½çŠ¶æ€</h2>
        <div id="resource-status"></div>
    </div>
    
    <script src="/js/mermaid.min.js"></script>
    <script src="/js/katex.min.js"></script>
    <script src="/js/katex-auto-render.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mermaidStatus = document.getElementById('mermaid-status');
            const katexStatus = document.getElementById('katex-status');
            const resourceStatus = document.getElementById('resource-status');
            
            let statusHTML = '<h3>èµ„æºæ£€æµ‹ç»“æœ:</h3>';
            
            // æ£€æµ‹ Mermaid
            if (typeof mermaid !== 'undefined') {
                mermaidStatus.className = 'status success';
                mermaidStatus.textContent = 'âœ… Mermaid.js åŠ è½½æˆåŠŸ';
                statusHTML += '<div class="status success">âœ… Mermaid.js: /js/mermaid.min.js</div>';
                
                // åˆå§‹åŒ– Mermaid
                mermaid.initialize({ startOnLoad: true });
            } else {
                mermaidStatus.className = 'status error';
                mermaidStatus.textContent = 'âŒ Mermaid.js åŠ è½½å¤±è´¥';
                statusHTML += '<div class="status error">âŒ Mermaid.js: åŠ è½½å¤±è´¥</div>';
            }
            
            // æ£€æµ‹ KaTeX
            if (typeof katex !== 'undefined') {
                katexStatus.className = 'status success';
                katexStatus.textContent = 'âœ… KaTeX åŠ è½½æˆåŠŸ';
                statusHTML += '<div class="status success">âœ… KaTeX CSS: /css/katex.min.css</div>';
                statusHTML += '<div class="status success">âœ… KaTeX JS: /js/katex.min.js</div>';
                
                // æ£€æµ‹ auto-render
                if (typeof renderMathInElement !== 'undefined') {
                    statusHTML += '<div class="status success">âœ… KaTeX Auto-render: /js/katex-auto-render.min.js</div>';
                    // æ¸²æŸ“æ•°å­¦å…¬å¼
                    renderMathInElement(document.body, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true},
                            {left: '$', right: '$', display: false}
                        ]
                    });
                } else {
                    statusHTML += '<div class="status error">âŒ KaTeX Auto-render: åŠ è½½å¤±è´¥</div>';
                }
            } else {
                katexStatus.className = 'status error';
                katexStatus.textContent = 'âŒ KaTeX åŠ è½½å¤±è´¥';
                statusHTML += '<div class="status error">âŒ KaTeX: åŠ è½½å¤±è´¥</div>';
            }
            
            // æ£€æµ‹ç½‘ç»œè¯·æ±‚
            statusHTML += '<h3>ç½‘ç»œè¯·æ±‚æ£€æµ‹:</h3>';
            const resources = [
                '/js/mermaid.min.js',
                '/css/katex.min.css', 
                '/js/katex.min.js',
                '/js/katex-auto-render.min.js'
            ];
            
            resources.forEach(resource => {
                fetch(resource)
                    .then(response => {
                        if (response.ok) {
                            statusHTML += `<div class="status success">âœ… ${resource} (${response.status})</div>`;
                        } else {
                            statusHTML += `<div class="status error">âŒ ${resource} (${response.status})</div>`;
                        }
                        resourceStatus.innerHTML = statusHTML;
                    })
                    .catch(error => {
                        statusHTML += `<div class="status error">âŒ ${resource} (ç½‘ç»œé”™è¯¯)</div>`;
                        resourceStatus.innerHTML = statusHTML;
                    });
            });
            
            statusHTML += '<div class="status">ğŸ”„ æ£€æµ‹ç½‘ç»œè¯·æ±‚ä¸­...</div>';
            resourceStatus.innerHTML = statusHTML;
        });
    </script>
</body>
</html>
