{{- define "main" }}

<header class="page-header">
  <h1>ğŸ“š æ‰€æœ‰æ–‡ç« </h1>
  <p class="page-description">æŒ‰æŠ€æœ¯ç±»ç›®å’Œæ¨èé¡ºåºæ•´ç†çš„å®Œæ•´æ–‡ç« åˆ—è¡¨</p>
</header>

{{- $allPosts := where site.RegularPages "Type" "posts" }}
{{- $postsByCategory := dict }}

{{/* æŒ‰ç±»ç›®åˆ†ç»„æ–‡ç«  */}}
{{- range $allPosts }}
  {{- range .Params.categories }}
    {{- $category := . }}
    {{- $posts := index $postsByCategory $category | default slice }}
    {{- $posts = $posts | append $ }}
    {{- $postsByCategory = merge $postsByCategory (dict $category $posts) }}
  {{- end }}
{{- end }}

{{/* å®šä¹‰ç±»ç›®å±•ç¤ºé¡ºåºå’Œåç§° */}}
{{- $categoryOrder := slice "AIåº”ç”¨" "AIèŠå¤©åŠ©æ‰‹" "Dify" "AutoGPT" "AutoGen" "OpenAIAgent" "QwenAgent" "Eino" "GitHubMCPServer" "LangGraph" "LangChain" "MetaGPT" "vLLM" "TensorRT-LLM" "Pythonåº•å±‚å®ç°" "Goè¯­è¨€æ¡†æ¶" "TensorFlow" "Ray" "FastAPI" "gRPC" "Kitex" "Nginx" "Kafka" "Flink" "Pulsar" "Kubernetes" "Docker" "Etcd" "Istio" "Envoy" "MongoDB" "MySQL" "ClickHouse" "RocksDB" "LevelDB" "PgVector" "Milvus" "Ceph" "MinIO" "ElasticSearch" "NetPoll" "OpenManus" }}

{{- $categoryDisplayInfo := dict 
  "AIåº”ç”¨" (dict "icon" "ğŸ¤" "desc" "æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹ç³»ç»Ÿ - Home Assistantã€LiveKitã€VoiceHelperå®æ—¶è¯­éŸ³å¤„ç†æŠ€æœ¯æ ˆ")
  "AIèŠå¤©åŠ©æ‰‹" (dict "icon" "ğŸ’¬" "desc" "AIèŠå¤©åŠ©æ‰‹å¹³å° - Chatwootå¼€æºå®¢æœç³»ç»Ÿæ¶æ„è®¾è®¡ä¸æºç å®ç°è¯¦è§£")
  "Dify" (dict "icon" "ğŸ¤–" "desc" "Difyä½ä»£ç LLMåº”ç”¨å¼€å‘å¹³å° - å·¥ä½œæµå¼•æ“æ¶æ„ä¸æ ¸å¿ƒæ¨¡å—æºç æ·±åº¦å‰–æ")
  "AutoGPT" (dict "icon" "ğŸš€" "desc" "AutoGPTè‡ªä¸»æ™ºèƒ½ä½“ - Blockç³»ç»Ÿæ¶æ„ä¸Pluginç”Ÿæ€æºç åˆ†æ")
  "AutoGen" (dict "icon" "ğŸ”„" "desc" "Microsoft AutoGen - å¤šæ™ºèƒ½ä½“åä½œæ¡†æ¶ä¸å¯¹è¯ç¼–æ’æœºåˆ¶æ·±åº¦è§£æ")
  "OpenAIAgent" (dict "icon" "ğŸ§ " "desc" "OpenAI Agentå¼€å‘å®æˆ˜ - Function Callingä¸Tool Useæœ€ä½³å®è·µ")
  "QwenAgent" (dict "icon" "ğŸ¤–" "desc" "é˜¿é‡Œé€šä¹‰åƒé—®æ™ºèƒ½ä½“ - ReActæ¨ç†ä¸å·¥å…·è°ƒç”¨æ¡†æ¶æŠ€æœ¯å®ç°")
  "Eino" (dict "icon" "âš¡" "desc" "å­—èŠ‚è·³åŠ¨Einoæ¡†æ¶ - ä¼ä¸šçº§å¤§æ¨¡å‹åº”ç”¨å¼€å‘ä¸éƒ¨ç½²å®è·µ")
  "GitHubMCPServer" (dict "icon" "ğŸ”§" "desc" "GitHub MCPæœåŠ¡å™¨ - Model Context Protocolåè®®å®ç°ä¸é›†æˆæ–¹æ¡ˆ")
  "LangGraph" (dict "icon" "ğŸ“Š" "desc" "LangGraphçŠ¶æ€å›¾å¼•æ“ - å¤æ‚AIå·¥ä½œæµç¼–æ’ä¸æ‰§è¡Œæ§åˆ¶æœºåˆ¶")
  "LangChain" (dict "icon" "ğŸ”—" "desc" "LangChainåº”ç”¨æ¡†æ¶ - Chainç»„åˆæ¨¡å¼ä¸Memoryç®¡ç†æ ¸å¿ƒæ¶æ„")
  "MetaGPT" (dict "icon" "ğŸ¯" "desc" "MetaGPTè½¯ä»¶å¼€å‘æ¡†æ¶ - å¤šè§’è‰²åä½œä¸ä»£ç ç”Ÿæˆæµæ°´çº¿è®¾è®¡")
  "vLLM" (dict "icon" "âš¡" "desc" "vLLMæ¨ç†åŠ é€Ÿå¼•æ“ - PagedAttentionä¸è¿ç»­æ‰¹å¤„ç†ä¼˜åŒ–æŠ€æœ¯")
  "TensorRT-LLM" (dict "icon" "ğŸš„" "desc" "NVIDIA TensorRT-LLM - GPUæ¨ç†ä¼˜åŒ–ä¸æ¨¡å‹é‡åŒ–éƒ¨ç½²å®è·µ")
  "Pythonåº•å±‚å®ç°" (dict "icon" "ğŸ" "desc" "Pythonæ·±åº¦è§£æ - CPythonè§£é‡Šå™¨å†…æ ¸ã€GILæœºåˆ¶ä¸å†…å­˜ç®¡ç†æºç å‰–æ")
  "Goè¯­è¨€æ¡†æ¶" (dict "icon" "ğŸ¹" "desc" "Goè¯­è¨€å†…æ ¸æŠ€æœ¯ - Runtimeè°ƒåº¦å™¨ã€åƒåœ¾å›æ”¶å™¨ä¸å¹¶å‘åŸè¯­å®ç°æœºåˆ¶")
  "TensorFlow" (dict "icon" "ğŸ§®" "desc" "TensorFlowæ·±åº¦å­¦ä¹  - è®¡ç®—å›¾æ‰§è¡Œå¼•æ“ä¸åˆ†å¸ƒå¼è®­ç»ƒæ¶æ„æºç åˆ†æ")
  "Ray" (dict "icon" "â˜€ï¸" "desc" "Rayåˆ†å¸ƒå¼è®¡ç®— - ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿä¸Actoræ¨¡å‹æ ¸å¿ƒæ¶æ„è®¾è®¡")
  "FastAPI" (dict "icon" "ğŸš€" "desc" "FastAPIé«˜æ€§èƒ½æ¡†æ¶ - ASGIå¼‚æ­¥æ¶æ„ä¸ä¾èµ–æ³¨å…¥ç³»ç»Ÿæºç æ·±åº¦è§£æ")
  "gRPC" (dict "icon" "ğŸ“¡" "desc" "gRPCé€šä¿¡æ¡†æ¶ - Protobufåºåˆ—åŒ–ä¸HTTP/2åŒå‘æµä¼ è¾“æœºåˆ¶å‰–æ")
  "Kitex" (dict "icon" "ğŸ› ï¸" "desc" "å­—èŠ‚è·³åŠ¨Kitex - å¾®æœåŠ¡æ²»ç†ä¸é«˜æ€§èƒ½RPCæ¡†æ¶è®¾è®¡å®è·µ")
  "Nginx" (dict "icon" "ğŸŒ" "desc" "Nginxé«˜æ€§èƒ½æœåŠ¡å™¨ - äº‹ä»¶é©±åŠ¨æ¶æ„ä¸åå‘ä»£ç†æ ¸å¿ƒæ¨¡å—æºç åˆ†æ")
  "Kafka" (dict "icon" "ğŸ”„" "desc" "Apache Kafkaæ¶ˆæ¯ç³»ç»Ÿ - åˆ†åŒºå­˜å‚¨å¼•æ“ä¸Raftä¸€è‡´æ€§åè®®å®ç°æœºåˆ¶")
  "Flink" (dict "icon" "ğŸŒŠ" "desc" "Apache Flinkæµè®¡ç®— - JobManagerè°ƒåº¦ä¸TaskManageræ‰§è¡Œå¼•æ“æ¶æ„")
  "Pulsar" (dict "icon" "ğŸ“¨" "desc" "Apache Pulsaræ¶ˆæ¯å¹³å° - BookKeeperå­˜å‚¨å±‚ä¸Brokeræ¶æ„æ·±åº¦åˆ†æ")
  "Kubernetes" (dict "icon" "â˜¸ï¸" "desc" "Kuberneteså®¹å™¨ç¼–æ’ - APIServerã€è°ƒåº¦å™¨ä¸æ§åˆ¶å™¨æ¨¡å¼æºç è§£æ")
  "Docker" (dict "icon" "ğŸ³" "desc" "Dockerå®¹å™¨æŠ€æœ¯ - å®¹å™¨è¿è¡Œæ—¶ã€é•œåƒå­˜å‚¨ä¸ç½‘ç»œæ¨¡å‹åº•å±‚å®ç°")
  "Etcd" (dict "icon" "ğŸ—„ï¸" "desc" "etcdåˆ†å¸ƒå¼å­˜å‚¨ - Raftå…±è¯†ç®—æ³•ä¸MVCCå¹¶å‘æ§åˆ¶æœºåˆ¶æ·±åº¦å‰–æ")
  "Istio" (dict "icon" "ğŸ•¸ï¸" "desc" "IstioæœåŠ¡ç½‘æ ¼ - Envoyæ•°æ®å¹³é¢ä¸Pilotæ§åˆ¶å¹³é¢äº¤äº’æœºåˆ¶")
  "Envoy" (dict "icon" "ğŸ”€" "desc" "Envoyä»£ç†æœåŠ¡å™¨ - è¿‡æ»¤å™¨é“¾æ¶æ„ä¸L7è´Ÿè½½å‡è¡¡ç®—æ³•å®ç°")
  "MongoDB" (dict "icon" "ğŸƒ" "desc" "MongoDBæ–‡æ¡£æ•°æ®åº“ - WiredTigerå­˜å‚¨å¼•æ“ä¸åˆ†ç‰‡é›†ç¾¤æ¶æ„åŸç†")
  "MySQL" (dict "icon" "ğŸ¬" "desc" "MySQLæ•°æ®åº“å†…æ ¸ - InnoDBå­˜å‚¨å¼•æ“ä¸æŸ¥è¯¢ä¼˜åŒ–å™¨æºç æ·±åº¦è§£æ")
  "ClickHouse" (dict "icon" "âš¡" "desc" "ClickHouseåˆ—å¼æ•°æ®åº“ - MergeTreeå¼•æ“ä¸åˆ†å¸ƒå¼æŸ¥è¯¢æ‰§è¡Œæœºåˆ¶")
  "RocksDB" (dict "icon" "ğŸ—¿" "desc" "RocksDBå­˜å‚¨å¼•æ“ - LSM-Treeæ¶æ„ä¸å‹ç¼©åˆå¹¶ç­–ç•¥æ ¸å¿ƒç®—æ³•å‰–æ")
  "LevelDB" (dict "icon" "ğŸ“š" "desc" "LevelDBé”®å€¼å­˜å‚¨ - SSTableç»“æ„è®¾è®¡ä¸Bloom Filterä¼˜åŒ–æŠ€æœ¯")
  "PgVector" (dict "icon" "ğŸ”" "desc" "pgvectorå‘é‡æ‰©å±• - PostgreSQLå‘é‡æ£€ç´¢ä¸HNSWç´¢å¼•ç®—æ³•å®ç°")
  "Milvus" (dict "icon" "ğŸ§­" "desc" "Milvuså‘é‡æ•°æ®åº“ - åˆ†å¸ƒå¼å‘é‡æ£€ç´¢ä¸AIåŸç”Ÿå­˜å‚¨æ¶æ„è®¾è®¡")
  "Ceph" (dict "icon" "ğŸ—‚ï¸" "desc" "Cephåˆ†å¸ƒå¼å­˜å‚¨ - CRUSHç®—æ³•ä¸OSDå­˜å‚¨èŠ‚ç‚¹ç®¡ç†æœºåˆ¶æ·±åº¦è§£æ")
  "MinIO" (dict "icon" "ğŸ“¦" "desc" "MinIOå¯¹è±¡å­˜å‚¨ - S3å…¼å®¹APIä¸çº åˆ ç æ•°æ®ä¿æŠ¤æŠ€æœ¯å®ç°")
  "ElasticSearch" (dict "icon" "ğŸ”" "desc" "Elasticsearchæœç´¢å¼•æ“ - Luceneå€’æ’ç´¢å¼•ä¸åˆ†å¸ƒå¼æŸ¥è¯¢åè°ƒæœºåˆ¶")
  "NetPoll" (dict "icon" "ğŸŒ" "desc" "å­—èŠ‚è·³åŠ¨NetPoll - é«˜æ€§èƒ½ç½‘ç»œåº“ä¸epolläº‹ä»¶é©±åŠ¨æ¶æ„ä¼˜åŒ–")
  "OpenManus" (dict "icon" "ğŸ¤–" "desc" "OpenManusæœºå™¨äººå¹³å° - å®æ—¶æ§åˆ¶ç³»ç»Ÿä¸ä¼ æ„Ÿå™¨æ•°æ®å¤„ç†æ¶æ„")
}}

<div class="posts-by-category">
  {{/* æŒ‰é¢„å®šä¹‰é¡ºåºæ˜¾ç¤ºç±»ç›® */}}
  {{- range $categoryOrder }}
    {{- $category := . }}
    {{- $posts := index $postsByCategory $category }}
    {{- if $posts }}
      {{- $categoryInfo := index $categoryDisplayInfo $category }}
      {{- $icon := index $categoryInfo "icon" | default "ğŸ“–" }}
      {{- $desc := index $categoryInfo "desc" | default (printf "%s ç›¸å…³æŠ€æœ¯æ–‡æ¡£å’Œæºç åˆ†æ" $category) }}
      {{- $postCount := len $posts }}
      {{- $sortedPosts := sort $posts ".Params.weight" "asc" }}
      {{- $sortedPosts = $sortedPosts | default (sort $posts "Date" "desc") }}
      
<section class="category-section">
  <div class="category-header">
    <h2 class="category-title">
      {{ $icon }} {{ $category }}
      <span class="category-count">({{ $postCount }} ç¯‡)</span>
    </h2>
    <p class="category-description">{{ $desc }}</p>
  </div>
  
  <div class="category-posts-grid">
    {{- range $index, $post := $sortedPosts }}
    <article class="post-card">
      <div class="post-card-header">
        <h3 class="post-title">
          <span class="post-number">{{ add $index 1 }}.</span>
          <a href="{{ $post.Permalink }}">{{ $post.Title }}</a>
        </h3>
        {{- if $post.Params.weight }}
        <span class="post-weight" title="æ¨èé¡ºåº">{{ $post.Params.weight }}</span>
        {{- end }}
      </div>
      
      {{- if $post.Summary }}
      <div class="post-summary">
        <p>{{ $post.Summary | plainify | htmlUnescape | truncate 120 }}</p>
      </div>
      {{- end }}
      
      <div class="post-meta">
        <time class="post-date">ğŸ“… {{ $post.Date.Format "2006-01-02" }}</time>
        {{- if $post.Params.tags }}
        <div class="post-tags">
          {{- range first 3 $post.Params.tags }}
          <span class="tag">{{ . }}</span>
          {{- end }}
        </div>
        {{- end }}
      </div>
    </article>
    {{- end }}
  </div>
  
  <div class="category-footer">
    <a href="/categories/{{ $category | urlize }}/" class="view-category">
      æŸ¥çœ‹ {{ $category }} åˆ†ç±»é¡µ â†’
    </a>
  </div>
</section>
    {{- end }}
  {{- end }}

  {{/* æ˜¾ç¤ºå…¶ä»–æœªåœ¨é¢„å®šä¹‰é¡ºåºä¸­çš„ç±»ç›® */}}
  {{- range $category, $posts := $postsByCategory }}
    {{- $isInOrder := false }}
    {{- range $categoryOrder }}
      {{- if eq . $category }}
        {{- $isInOrder = true }}
      {{- end }}
    {{- end }}
    {{- if not $isInOrder }}
      {{- $postCount := len $posts }}
      {{- $sortedPosts := sort $posts ".Params.weight" "asc" }}
      {{- $sortedPosts = $sortedPosts | default (sort $posts "Date" "desc") }}

<section class="category-section">
  <div class="category-header">
    <h2 class="category-title">
      ğŸ“– {{ $category }}
      <span class="category-count">({{ $postCount }} ç¯‡)</span>
    </h2>
    <p class="category-description">{{ $category }} ç›¸å…³æŠ€æœ¯æ–‡æ¡£å’Œæºç åˆ†æ</p>
  </div>
  
  <div class="category-posts-grid">
    {{- range $index, $post := $sortedPosts }}
    <article class="post-card">
      <div class="post-card-header">
        <h3 class="post-title">
          <span class="post-number">{{ add $index 1 }}.</span>
          <a href="{{ $post.Permalink }}">{{ $post.Title }}</a>
        </h3>
        {{- if $post.Params.weight }}
        <span class="post-weight">{{ $post.Params.weight }}</span>
        {{- end }}
      </div>
      
      {{- if $post.Summary }}
      <div class="post-summary">
        <p>{{ $post.Summary | plainify | htmlUnescape | truncate 120 }}</p>
      </div>
      {{- end }}
      
      <div class="post-meta">
        <time class="post-date">ğŸ“… {{ $post.Date.Format "2006-01-02" }}</time>
        {{- if $post.Params.tags }}
        <div class="post-tags">
          {{- range first 3 $post.Params.tags }}
          <span class="tag">{{ . }}</span>
          {{- end }}
        </div>
        {{- end }}
      </div>
    </article>
    {{- end }}
  </div>
  
  <div class="category-footer">
    <a href="/categories/{{ $category | urlize }}/" class="view-category">
      æŸ¥çœ‹ {{ $category }} åˆ†ç±»é¡µ â†’
    </a>
  </div>
</section>
    {{- end }}
  {{- end }}
</div>

<style>
.page-header {
  text-align: center;
  margin-bottom: 2rem;
}

.page-header h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
}

.page-description {
  font-size: 1.1rem;
  color: var(--secondary);
  margin-bottom: 0;
}

.posts-by-category {
  max-width: 1200px;
  margin: 0 auto;
}

.category-section {
  margin-bottom: 3rem;
  padding: 1.5rem;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--entry);
}

.category-header {
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--border);
}

.category-title {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.category-count {
  font-size: 0.9rem;
  color: var(--secondary);
  font-weight: normal;
}

.category-description {
  font-size: 1rem;
  color: var(--secondary);
  margin: 0;
  line-height: 1.6;
}

.category-posts-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
}

.post-card {
  padding: 1.2rem;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--theme);
  transition: all 0.3s ease;
}

.post-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  border-color: var(--primary);
}

.post-card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 0.8rem;
}

.post-title {
  font-size: 1.1rem;
  margin: 0;
  flex: 1;
}

.post-title a {
  color: var(--content);
  text-decoration: none;
  display: block;
  line-height: 1.4;
}

.post-title a:hover {
  color: var(--primary);
}

.post-number {
  color: var(--primary);
  font-weight: bold;
  margin-right: 0.5rem;
}

.post-weight {
  background: var(--primary);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: bold;
  margin-left: 0.5rem;
  flex-shrink: 0;
}

.post-summary {
  margin-bottom: 0.8rem;
}

.post-summary p {
  margin: 0;
  color: var(--secondary);
  line-height: 1.5;
  font-size: 0.9rem;
}

.post-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.85rem;
  color: var(--secondary);
}

.post-date {
  display: flex;
  align-items: center;
  gap: 0.3rem;
}

.post-tags {
  display: flex;
  gap: 0.3rem;
  flex-wrap: wrap;
}

.tag {
  background: var(--code-bg);
  color: var(--content);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.8rem;
}

.category-footer {
  margin-top: 1.5rem;
  text-align: center;
  padding-top: 1rem;
  border-top: 1px solid var(--border);
}

.view-category {
  color: var(--primary);
  text-decoration: none;
  font-weight: 500;
}

.view-category:hover {
  text-decoration: underline;
}

@media (max-width: 768px) {
  .category-posts-grid {
    grid-template-columns: 1fr;
  }
  
  .post-card-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .post-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
}
</style>

{{- end }}
