{{- define "main" }}

{{- if (and site.Params.profileMode.enabled .IsHome) }}
{{- partial "index_profile.html" . }}
{{- else }} {{/* if not profileMode */}}

{{- if and .IsHome site.Params.homeInfoParams }}
{{- partial "home_info.html" . }}
{{- end }}

{{/* æ–‡ç« ç±»ç›®å±•ç¤º */}}
{{- if .IsHome }}
<div class="categories-section">
  <header class="categories-header">
    <h2>ğŸ“š æ–‡ç« ç±»ç›®</h2>
    <p>æŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„æ–‡ç« é›†åˆ</p>
  </header>
  
  {{- $categories := dict }}
  {{- $categoryDisplayNames := dict }}
  {{- range site.RegularPages }}
    {{- if eq .Type "posts" }}
      {{- $filename := path.BaseName .File.Path }}
      {{- $parts := split $filename "-" }}
      {{- if gt (len $parts) 1 }}
        {{- $categoryRaw := index $parts 0 }}
        {{- $category := lower $categoryRaw }}
        {{- $posts := index $categories $category | default slice }}
        {{- $posts = $posts | append . }}
        {{- $categories = merge $categories (dict $category $posts) }}
        {{- $categoryDisplayNames = merge $categoryDisplayNames (dict $category $categoryRaw) }}
      {{- end }}
    {{- end }}
  {{- end }}
  
  <div class="categories-grid">
    {{- $categoryOrder := slice "aiåº”ç”¨" "voicehelper" "dify" "langchain" "langgraph"  "autogpt" "autogen" "openaiagent"  "eino" "githubmcpserver" "metagpt" "pgvector" "milvus" "vllm" "tensorrt" "pytorch" "tensorflow" "python" "golang"  "kubernetes" "docker" "mongodb" "mysql" "elasticsearch"  "kafka" "kitex" "kratos" "fastapi" "grpc"  "nginx" "flink" "pulsar"  "etcd" "istio" "envoy"  "clickhouse" "rocksdb"  "ceph"  "leveldb" "netpoll" "ray" "qwenagent" "minio" "voicehelper"}}
    {{- range $categoryOrder }}
      {{- $category := . }}
      {{- $posts := index $categories $category }}
      {{- if $posts }}
        {{- $postCount := len $posts }}
    <div class="category-card">
      <div class="category-header">
        <h3 class="category-title">
          <a href="/categories/{{ $category | urlize }}/">{{ index $categoryDisplayNames $category | default $category }}</a>
        </h3>
        <span class="category-count">{{ $postCount }} ç¯‡æ–‡ç« </span>
      </div>
      <div class="category-description">
        {{- if eq $category "aiåº”ç”¨" }}
        <p>ğŸ¤ æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹ç³»ç»Ÿ - Home Assistantã€LiveKitã€fastchatå®æ—¶è¯­éŸ³å¤„ç†æŠ€æœ¯æ ˆ</p>
        {{- else if eq $category "dify" }}
          <p>ğŸ¤– Difyä½ä»£ç LLMåº”ç”¨å¼€å‘å¹³å° - å·¥ä½œæµå¼•æ“æ¶æ„ä¸æ ¸å¿ƒæ¨¡å—æºç æ·±åº¦å‰–æ</p>
        {{- else if eq $category "autogpt" }}
          <p>ğŸš€ AutoGPTè‡ªä¸»æ™ºèƒ½ä½“ - Blockç³»ç»Ÿæ¶æ„ä¸Pluginç”Ÿæ€æºç åˆ†æ</p>
        {{- else if eq $category "autogen" }}
          <p>ğŸ”„ Microsoft AutoGen - å¤šæ™ºèƒ½ä½“åä½œæ¡†æ¶ä¸å¯¹è¯ç¼–æ’æœºåˆ¶æ·±åº¦è§£æ</p>
        {{- else if eq $category "openaiagent" }}
          <p>ğŸ§  OpenAI Agentå¼€å‘å®æˆ˜ - Function Callingä¸Tool Useæœ€ä½³å®è·µ</p>
        {{- else if eq $category "qwenagent" }}
          <p>ğŸ¤– é˜¿é‡Œé€šä¹‰åƒé—®æ™ºèƒ½ä½“ - ReActæ¨ç†ä¸å·¥å…·è°ƒç”¨æ¡†æ¶æŠ€æœ¯å®ç°</p>
        {{- else if eq $category "eino" }}
          <p>âš¡ å­—èŠ‚è·³åŠ¨Einoæ¡†æ¶ - ä¼ä¸šçº§å¤§æ¨¡å‹åº”ç”¨å¼€å‘ä¸éƒ¨ç½²å®è·µ</p>
        {{- else if eq $category "githubmcpserver" }}
          <p>ğŸ”§ GitHub MCPæœåŠ¡å™¨ - Model Context Protocolåè®®å®ç°ä¸é›†æˆæ–¹æ¡ˆ</p>
        {{- else if eq $category "langgraph" }}
          <p>ğŸ“Š LangGraphçŠ¶æ€å›¾å¼•æ“ - å¤æ‚AIå·¥ä½œæµç¼–æ’ä¸æ‰§è¡Œæ§åˆ¶æœºåˆ¶</p>
        {{- else if eq $category "langchain" }}
          <p>ğŸ”— LangChainåº”ç”¨æ¡†æ¶ - Chainç»„åˆæ¨¡å¼ä¸Memoryç®¡ç†æ ¸å¿ƒæ¶æ„</p>
        {{- else if eq $category "metagpt" }}
          <p>ğŸ¯ MetaGPTè½¯ä»¶å¼€å‘æ¡†æ¶ - å¤šè§’è‰²åä½œä¸ä»£ç ç”Ÿæˆæµæ°´çº¿è®¾è®¡</p>
        {{- else if eq $category "vllm" }}
          <p>âš¡ vLLMæ¨ç†åŠ é€Ÿå¼•æ“ - PagedAttentionä¸è¿ç»­æ‰¹å¤„ç†ä¼˜åŒ–æŠ€æœ¯</p>
        {{- else if eq $category "tensorrt" }}
          <p>ğŸš„ NVIDIA TensorRT-LLM - GPUæ¨ç†ä¼˜åŒ–ä¸æ¨¡å‹é‡åŒ–éƒ¨ç½²å®è·µ</p>
        {{- else if eq $category "python" }}
          <p>ğŸ Pythonæ·±åº¦è§£æ - CPythonè§£é‡Šå™¨å†…æ ¸ã€GILæœºåˆ¶ä¸å†…å­˜ç®¡ç†æºç å‰–æ</p>
        {{- else if eq $category "golang" }}
          <p>ğŸ¹ Goè¯­è¨€å†…æ ¸æŠ€æœ¯ - Runtimeè°ƒåº¦å™¨ã€åƒåœ¾å›æ”¶å™¨ä¸å¹¶å‘åŸè¯­å®ç°æœºåˆ¶</p>
        {{- else if eq $category "tensorflow" }}
          <p>ğŸ§® TensorFlowæ·±åº¦å­¦ä¹  - è®¡ç®—å›¾æ‰§è¡Œå¼•æ“ä¸åˆ†å¸ƒå¼è®­ç»ƒæ¶æ„æºç åˆ†æ</p>
        {{- else if eq $category "ray" }}
          <p>â˜€ï¸ Rayåˆ†å¸ƒå¼è®¡ç®— - ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿä¸Actoræ¨¡å‹æ ¸å¿ƒæ¶æ„è®¾è®¡</p>
        {{- else if eq $category "fastapi" }}
          <p>ğŸš€ FastAPIé«˜æ€§èƒ½æ¡†æ¶ - ASGIå¼‚æ­¥æ¶æ„ä¸ä¾èµ–æ³¨å…¥ç³»ç»Ÿæºç æ·±åº¦è§£æ</p>
        {{- else if eq $category "grpc" }}
          <p>ğŸ“¡ gRPCé€šä¿¡æ¡†æ¶ - Protobufåºåˆ—åŒ–ä¸HTTP/2åŒå‘æµä¼ è¾“æœºåˆ¶å‰–æ</p>
        {{- else if eq $category "kitex" }}
          <p>ğŸ› ï¸ å­—èŠ‚è·³åŠ¨Kitex - å¾®æœåŠ¡æ²»ç†ä¸é«˜æ€§èƒ½RPCæ¡†æ¶è®¾è®¡å®è·µ</p>
        {{- else if eq $category "nginx" }}
          <p>ğŸŒ Nginxé«˜æ€§èƒ½æœåŠ¡å™¨ - äº‹ä»¶é©±åŠ¨æ¶æ„ä¸åå‘ä»£ç†æ ¸å¿ƒæ¨¡å—æºç åˆ†æ</p>
        {{- else if eq $category "kafka" }}
          <p>ğŸ”„ Apache Kafkaæ¶ˆæ¯ç³»ç»Ÿ - åˆ†åŒºå­˜å‚¨å¼•æ“ä¸Raftä¸€è‡´æ€§åè®®å®ç°æœºåˆ¶</p>
        {{- else if eq $category "flink" }}
          <p>ğŸŒŠ Apache Flinkæµè®¡ç®— - JobManagerè°ƒåº¦ä¸TaskManageræ‰§è¡Œå¼•æ“æ¶æ„</p>
        {{- else if eq $category "pulsar" }}
          <p>ğŸ“¨ Apache Pulsaræ¶ˆæ¯å¹³å° - BookKeeperå­˜å‚¨å±‚ä¸Brokeræ¶æ„æ·±åº¦åˆ†æ</p>
        {{- else if eq $category "kubernetes" }}
          <p>â˜¸ï¸ Kuberneteså®¹å™¨ç¼–æ’ - APIServerã€è°ƒåº¦å™¨ä¸æ§åˆ¶å™¨æ¨¡å¼æºç è§£æ</p>
        {{- else if eq $category "docker" }}
          <p>ğŸ³ Dockerå®¹å™¨æŠ€æœ¯ - å®¹å™¨è¿è¡Œæ—¶ã€é•œåƒå­˜å‚¨ä¸ç½‘ç»œæ¨¡å‹åº•å±‚å®ç°</p>
        {{- else if eq $category "etcd" }}
          <p>ğŸ—„ï¸ etcdåˆ†å¸ƒå¼å­˜å‚¨ - Raftå…±è¯†ç®—æ³•ä¸MVCCå¹¶å‘æ§åˆ¶æœºåˆ¶æ·±åº¦å‰–æ</p>
        {{- else if eq $category "istio" }}
          <p>ğŸ•¸ï¸ IstioæœåŠ¡ç½‘æ ¼ - Envoyæ•°æ®å¹³é¢ä¸Pilotæ§åˆ¶å¹³é¢äº¤äº’æœºåˆ¶</p>
        {{- else if eq $category "envoy" }}
          <p>ğŸ”€ Envoyä»£ç†æœåŠ¡å™¨ - è¿‡æ»¤å™¨é“¾æ¶æ„ä¸L7è´Ÿè½½å‡è¡¡ç®—æ³•å®ç°</p>
        {{- else if eq $category "mongodb" }}
          <p>ğŸƒ MongoDBæ–‡æ¡£æ•°æ®åº“ - WiredTigerå­˜å‚¨å¼•æ“ä¸åˆ†ç‰‡é›†ç¾¤æ¶æ„åŸç†</p>
        {{- else if eq $category "mysql" }}
          <p>ğŸ¬ MySQLæ•°æ®åº“å†…æ ¸ - InnoDBå­˜å‚¨å¼•æ“ä¸æŸ¥è¯¢ä¼˜åŒ–å™¨æºç æ·±åº¦è§£æ</p>
        {{- else if eq $category "clickhouse" }}
          <p>âš¡ ClickHouseåˆ—å¼æ•°æ®åº“ - MergeTreeå¼•æ“ä¸åˆ†å¸ƒå¼æŸ¥è¯¢æ‰§è¡Œæœºåˆ¶</p>
        {{- else if eq $category "rocksdb" }}
          <p>ğŸ—¿ RocksDBå­˜å‚¨å¼•æ“ - LSM-Treeæ¶æ„ä¸å‹ç¼©åˆå¹¶ç­–ç•¥æ ¸å¿ƒç®—æ³•å‰–æ</p>
        {{- else if eq $category "leveldb" }}
          <p>ğŸ“š LevelDBé”®å€¼å­˜å‚¨ - SSTableç»“æ„è®¾è®¡ä¸Bloom Filterä¼˜åŒ–æŠ€æœ¯</p>
        {{- else if eq $category "pgvector" }}
          <p>ğŸ” pgvectorå‘é‡æ‰©å±• - PostgreSQLå‘é‡æ£€ç´¢ä¸HNSWç´¢å¼•ç®—æ³•å®ç°</p>
        {{- else if eq $category "milvus" }}
          <p>ğŸ§­ Milvuså‘é‡æ•°æ®åº“ - åˆ†å¸ƒå¼å‘é‡æ£€ç´¢ä¸AIåŸç”Ÿå­˜å‚¨æ¶æ„è®¾è®¡</p>
        {{- else if eq $category "ceph" }}
          <p>ğŸ—‚ï¸ Cephåˆ†å¸ƒå¼å­˜å‚¨ - CRUSHç®—æ³•ä¸OSDå­˜å‚¨èŠ‚ç‚¹ç®¡ç†æœºåˆ¶æ·±åº¦è§£æ</p>
        {{- else if eq $category "minio" }}
          <p>ğŸ“¦ MinIOå¯¹è±¡å­˜å‚¨ - S3å…¼å®¹APIä¸çº åˆ ç æ•°æ®ä¿æŠ¤æŠ€æœ¯å®ç°</p>
        {{- else if eq $category "elasticsearch" }}
          <p>ğŸ” Elasticsearchæœç´¢å¼•æ“ - Luceneå€’æ’ç´¢å¼•ä¸åˆ†å¸ƒå¼æŸ¥è¯¢åè°ƒæœºåˆ¶</p>
        {{- else if eq $category "netpoll" }}
          <p>ğŸŒ å­—èŠ‚è·³åŠ¨NetPoll - é«˜æ€§èƒ½ç½‘ç»œåº“ä¸epolläº‹ä»¶é©±åŠ¨æ¶æ„ä¼˜åŒ–</p>
        {{- else if eq $category "kratos" }}
          <p>ğŸ¤– Kratoså¾®æœåŠ¡æ¡†æ¶ - å¾®æœåŠ¡æ²»ç†ä¸åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„è®¾è®¡</p>
        {{- else if eq $category "voicehelper" }}
          <p>ğŸ¤– VoiceHelper - è¯­éŸ³åŠ©æ‰‹æ¡†æ¶ä¸å®æ—¶è¯­éŸ³å¤„ç†æŠ€æœ¯æ ˆ</p>
        {{- else }}
          <p>ğŸ“– {{ $category }} ç›¸å…³æŠ€æœ¯æ–‡æ¡£å’Œæºç åˆ†æ</p>
        {{- end }}
      </div>
      <div class="category-posts">
        <div class="recent-posts">
          <h4>æœ€æ–°æ–‡ç« </h4>
          <ul>
            {{- range first 3 (sort $posts "Date" "desc") }}
            <li>
              <a href="{{ .Permalink }}" title="{{ .Title }}">
                {{ .Title | truncate 50 }}
              </a>
              <time>{{ .Date.Format "01-02" }}</time>
            </li>
            {{- end }}
          </ul>
          {{- if gt $postCount 3 }}
          <a href="/categories/{{ $category | urlize }}/" class="view-all">æŸ¥çœ‹å…¨éƒ¨ {{ $postCount }} ç¯‡ â†’</a>
          {{- end }}
        </div>
      </div>
    </div>
      {{- end }}
    {{- end }}
    
    {{/* æ˜¾ç¤ºå…¶ä»–æœªåœ¨ä¼˜å…ˆçº§åˆ—è¡¨ä¸­çš„åˆ†ç±» */}}
    {{- range $category, $posts := $categories }}
      {{- $isInOrder := false }}
      {{- range $categoryOrder }}
        {{- if eq . $category }}
          {{- $isInOrder = true }}
        {{- end }}
      {{- end }}
      {{- if not $isInOrder }}
        {{- $postCount := len $posts }}
    <div class="category-card">
      <div class="category-header">
        <h3 class="category-title">
          <a href="/categories/{{ $category | urlize }}/">{{ index $categoryDisplayNames $category | default $category }}</a>
        </h3>
        <span class="category-count">{{ $postCount }} ç¯‡æ–‡ç« </span>
      </div>
      <div class="category-description">
        <p>{{ if eq $category "è¯­éŸ³åŠ©æ‰‹" }}AIåº”ç”¨{{ else if eq $category "èŠå¤©åŠ©æ‰‹" }}AIèŠå¤©åŠ©æ‰‹{{ else }}{{ $category }}{{ end }} ç›¸å…³æŠ€æœ¯æ–‡æ¡£å’Œæºç åˆ†æ</p>
      </div>
      <div class="category-posts">
        <div class="recent-posts">
          <h4>æœ€æ–°æ–‡ç« </h4>
          <ul>
            {{- range first 3 (sort $posts "Date" "desc") }}
            <li>
              <a href="{{ .Permalink }}" title="{{ .Title }}">
                {{ .Title | truncate 50 }}
              </a>
              <time>{{ .Date.Format "01-02" }}</time>
            </li>
            {{- end }}
          </ul>
          {{- if gt $postCount 3 }}
          <a href="/categories/{{ $category | urlize }}/" class="view-all">æŸ¥çœ‹å…¨éƒ¨ {{ $postCount }} ç¯‡ â†’</a>
          {{- end }}
        </div>
      </div>
    </div>
      {{- end }}
    {{- end }}
  </div>
</div>
{{- end }}

{{/* æœ€æ–°æ–‡ç« åˆ—è¡¨ */}}
{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- $pages = where $pages "Params.hiddenInHomeList" "!=" "true"  }}
{{- $paginator := .Paginate (first 10 $pages) }}

<div class="recent-posts-section">
  <header class="section-header">
    <h2>ğŸ“ æœ€æ–°æ–‡ç« </h2>
  </header>
  
  {{- range $index, $page := $paginator.Pages }}
  <article class="post-entry">
    {{- $isHidden := (.Param "cover.hiddenInList") | default (.Param "cover.hidden") | default false }}
    {{- partial "cover.html" (dict "cxt" . "IsSingle" false "isHidden" $isHidden) }}
    <header class="entry-header">
      <h2 class="entry-hint-parent">
        {{- .Title }}
        {{- if .Draft }}
        <span class="entry-hint" title="Draft">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
            <path d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
          </svg>
        </span>
        {{- end }}
      </h2>
    </header>
    {{- if (ne (.Param "hideSummary") true) }}
    <div class="entry-content">
      <p>{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}</p>
    </div>
    {{- end }}
    {{- if not (.Param "hideMeta") }}
    <footer class="entry-footer">
      {{- partial "post_meta.html" . -}}
    </footer>
    {{- end }}
    <a class="entry-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}"></a>
  </article>
  {{- end }}
  
  <div class="view-more">
    <a href="/archives/" class="view-all-posts">æŸ¥çœ‹æ‰€æœ‰æ–‡ç«  â†’</a>
  </div>
</div>

{{- end }}{{/* end profileMode */}}

{{- end }}{{- /* end main */ -}}
